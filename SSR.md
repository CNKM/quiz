# 互动测验系统需求规格说明书

## 1. 项目背景与目标

本项目旨在实现一个功能丰富、结构灵活、可扩展的前端互动测验系统。主要应用场景包括自学测验、课堂自测、在线考试等。系统需支持多种题型，便于题库维护与扩展，具备良好的用户体验和数据交互能力，并可无缝对接后端服务。

---

## 2. 系统架构与技术选型

### 2.1 技术栈

- **HTML5**：用于页面结构与语义布局，保证内容可访问性与可维护性。
- **CSS3**：实现所有页面与组件的样式，包括响应式设计、主题色彩、动画交互、自定义滚动条等。
- **JavaScript (ES6+)**：实现测验逻辑、DOM 操作、事件驱动、数据渲染与状态管理，采用模块化编程风格。
- **Font Awesome**：用于矢量图标展示（如侧边栏显示/隐藏、下拉箭头等）。
- **（可选）后端 API**：为动态题库、成绩存储、用户管理等扩展做准备。
- **媒体资源支持**：题型中可插入图片、音频、视频等多媒体内容。

### 2.2 目录结构

```
/
├── images/                 # 图片与说明文档配图
├── quiz.html               # 旧版主页面
├── quiz.min.html           # 旧版压缩页面
├── quiz_Test.html          # 旧版测试页面
├── quiz_data.js            # 旧版题库数据
├── readme.md               # 项目说明
└── new/                    # 新版主实现目录
    ├── backup/             # 备份及历史数据
    ├── index.html          # 新版主页面入口
    ├── quiz_data.js        # 新版题库数据
    ├── script.js           # 新版主交互逻辑
    └── style.css           # 新版样式表
```

---

## 3. 功能需求

### 3.1 题库与数据结构

- 题库数据存储于 `new/quiz_data.js`，采用结构化 JSON 格式，支持单选、多选、填空、判断、连线、视频等多题型。
- 每道题包含唯一 id、类型、题干、选项、答案、解析、（可选）多媒体资源字段。
- 支持题型扩展及媒体类型拓展，便于后续新增题型或支持图片/音频/视频题。

#### 题库数据结构示例

```javascript
const quizData = {
  "questions": [
    {
      "id": 1,
      "type": "完形填空",
      "questionType": "single-choice",
      "title": "My best friend, Connie",
      "content": "题干文本",
      "options": [
        {
          "question": "1.",
          "choices": { "A": "...", "B": "...", "C": "...", "D": "..." },
          "answer": "B",
          "explanation": "解析说明"
        }, ...
      ]
    },
    {
      "id": 101,
      "type": "地理知识",
      "questionType": "multi-choice",
      "title": "多选题示例",
      "content": "题干文本",
      "options": [
        {
          "question": "...",
          "choices": { "A": "...", "B": "...", ... },
          "answer": ["A", "C"],
          "explanation": "..."
        }
      ]
    },
    {
      "id": 102,
      "type": "语文常识",
      "questionType": "fill-in-blank",
      "title": "填空题示例",
      "content": "题干文本",
      "options": [
        {
          "question": "...",
          "blankCount": 1,
          "blanks": [{ "label": "1.", "placeholder": "请输入答案" }],
          "answer": ["正确答案"],
          "explanation": "..."
        }
      ]
    },
    // 判断题、连线题、视频题等见 quiz_data.js 详细结构
  ]
};
```

- 支持媒体题型（如 `mediaType: "video", mediaUrl: "..."`）。

---

### 3.2 UI 设计与布局

#### 3.2.1 总体界面

- 页面采用响应式布局，主容器为 `.quiz-container`，分为侧边栏（导航）与主内容区。
- 顶部适配移动端与桌面端，所有尺寸下均可流畅操作。

#### 3.2.2 侧边栏导航

- 显示所有测验标题（格式：“索引号. 测验标题”），过长自动省略，悬停显示完整标题。
- 支持类型筛选：自定义下拉菜单（用原生 `<select>` 改为自定义 HTML/CSS/JS 实现），可筛选“全部题型”及所有题型。
- 选中项绿色高亮（`.active`），已完成用深绿色（`.completed`）。
- 支持垂直滚动，题量多时依然友好。
- 侧边栏可隐藏/展开，点击左箭头（`fa-chevron-circle-left`）隐藏，右箭头（`fa-chevron-circle-right`）显示。

#### 3.2.3 主内容区

- 左栏显示测验文章（支持多行、原始换行、题号高亮可定位）。
- 右栏为作答区，展示所有选项、控制按钮（开始作答、交卷、计时、正确率）。
- 支持多媒体题型（如视频播放器）。
- 交互式选项（单选/多选/填空/判断/连线），样式统一，反馈直观。
- 交卷后自动高亮正确/错误答案，展示详细解析。
- 支持重做测验，重置作答状态。

#### 3.2.4 响应式细节

- 桌面端为左右分栏，移动端自动纵向堆叠。
- 侧边栏和主内容自适应高度，确保无论屏幕尺寸均体验友好。
- 自定义滚动条、按钮、下拉菜单等均适配深色主题和品牌色调。

---

### 3.3 交互与逻辑

- 测验开始：点击“开始作答”，计时器启动，所有选项解锁。
- 测验作答：各题型完成后自动保存作答记录，支持即时正确率显示。
- 交卷：点击“交卷”锁定当前答案，显示正确/错误高亮及详细解析，侧边栏同步标记该测验为“已完成”。
- 再次点击“交卷”：重置当前测验，清除答案与解析，恢复为未作答状态。
- 计时器：显示测验已用时间，随测验进行实时更新。
- 正确率：右栏实时显示“正确率: 已答题数/总题数 (百分比%)”。
- 题型筛选：选择题型后左侧列表自动过滤，仅显示对应类型测验。
- 题干锚点：点击题干内高亮题号，右侧选项区自动滚动定位对应题目。

---

### 3.4 数据与状态管理

- 全部测验数据保存在 JS 变量（如 `quizData`），答题状态、计时、完成标记均由 JS 管理。
- 支持后续扩展为本地存储/后端同步，便于持久化用户答题记录与成绩。
- 所有页面操作无须刷新，完全前端交互体验。

---

## 4. 详细 UI 元素与样式细节

### 4.1 颜色与主题

- 主色调：深灰（`#3a3a3a`）、绿色（`#4CAF50`）、浅灰（`#e0e0e0`）。
- 按钮、下拉菜单、侧边栏及高亮均统一配色风格。
- 下拉菜单选项悬停时绿色高亮，整体有阴影立体感。

### 4.2 控件与组件

- **自定义下拉菜单**：用 JS 动态生成 `<ul>` 选项，点击切换，支持键盘和鼠标操作。
- **计时器**：每秒更新，样式突出。
- **选项按钮**：方块样式，选中高亮，交卷后正确/错误用绿色/红色区分。
- **多媒体**：如有 `mediaType` 字段，自动插入 `<video>` 等播放器组件，支持在线播放。
- **填空/连线等题型**：自动渲染为输入框/拖拽区域，交互直观。

### 4.3 适配与无障碍

- 所有交互控件均可通过 Tab 键切换焦点，兼顾无障碍。
- 移动端按钮尺寸、滚动区域、交互反馈全适配触屏操作。

---

## 5. 未来扩展性

- **后端对接**：支持 RESTful API 动态加载题库、提交成绩、用户认证等。
- **用户系统**：注册、登录、个人成绩与测验历史。
- **测验参数定制**：允许设定时长、题量、随机抽题等。
- **高级统计与可视化**：答题分析、错题本、进步曲线。
- **题型扩展**：新题型、复杂多步骤题、多媒体复合题等。

---

## 6. 代码组织与实现约定

- 所有核心交互、UI 渲染、状态管理均写于 `new/script.js`，采用模块化和事件驱动设计。
- 页面骨架在 `new/index.html`，所有测验内容与交互通过 JS 动态加载与更新。
- 样式集中于 `new/style.css`，所有自定义组件、动画均在此定义。
- 题库数据结构需严格遵循 `new/quiz_data.js` 格式，便于后续自动化生成和扩展。
- 备份数据和临时方案保存在 `new/backup/`，不影响主功能。
- 页面无须依赖第三方框架，保持原生实现易于迁移和维护。

---

## 7. 典型用户流程（参考）

1. 用户打开 `new/index.html`，看到测验导航与主内容区。
2. 选择题型筛选/直接点击测验标题，加载文章与题目。
3. 点击“开始作答”，计时启动，逐题作答。
4. 题干/选项交互提示清晰，作答后可随时交卷。
5. 交卷后显示解析，侧边栏同步标记已完成。
6. 可重做测验或切换其他测验继续练习。

---

## 8. 其他说明

- 所有代码、数据与样式均可独立维护和升级。
- 代码注释需清晰，便于后续开发者理解和二次开发。
- 项目支持开源扩展，欢迎 PR 与 issue 反馈。

---

> **本需求规格说明书可直接输入 AI 自动生成完整代码实现，确保功能、UI、题型、交互等完全符合上述描述。**
>
