# 互动测验系统 - 需求规格说明书

## 1. 项目概述

本文档旨在定义互动测验系统的功能与技术需求。该系统是一个基于 Web 的在线答题平台，后端使用 Node.js 和 Express 构建，前端为纯 HTML/CSS/JS 应用。系统核心特性是动态加载题库和灵活的配置选项。

## 2. 系统架构

采用客户端/服务器 (C/S) 架构。

- **服务器端 (Backend)**: 一个 Node.js/Express 应用，负责：
  - 提供静态文件服务（HTML, CSS, JS, 题库 JSON 文件）。
  - 提供一个 API 接口，用于动态获取题库列表。
  - 通过环境变量管理配置（如端口号）。

- **客户端 (Frontend)**: 一个单页面应用 (SPA)，在浏览器中运行，负责：
  - 用户界面渲染。
  - 从后端获取题库数据并动态生成测验。
  - 处理用户交互（答题、提交等）。
  - 实时计算并显示分数。

## 3. 功能需求

### 3.1. 后端功能

| 功能点 | 描述 |
| :--- | :--- |
| **静态文件服务** | 服务器必须能够伺服 `public` 目录下的所有文件，包括 `index.html`, `script.js`, `style.css` 以及 `lib/` 目录中的所有 JSON 题库。 |
| **动态端口配置** | 服务器的监听端口必须可以通过 `.env` 文件中的 `SERVER_PORT` 环境变量进行配置。如果未配置，应有默认端口（如 3000）。 |
| **题库列表 API** | 必须提供 `GET /api/quiz-list` 接口，该接口扫描 `public/lib` 目录，并返回一个包含所有 `.json` 文件名的数组。 |

### 3.2. 前端功能

| 功能点 | 描述 |
| :--- | :--- |
| **动态加载题库** | 页面加载时，应调用 `/api/quiz-list` 接口获取所有可用题库，并动态填充到题库选择下拉菜单中。 |
| **题库切换** | 用户可以从下拉菜单中选择不同的题库，选择后，应用应加载并显示新题库的内容。 |
| **答题模式** | 用户可以选择“单题作答”或“套题作答”模式。UI 和逻辑应根据所选模式进行调整。 |
| **题目渲染** | 能够正确解析并渲染多种题型，包括单选、多选、填空、判断、连线和媒体题。 |
| **计时功能** | 在“套题作答”模式下，应有倒计时功能。 |
| **提交与计分** | 用户提交答案后，系统应能自动批改，计算得分和正确率，并以不同颜色（如绿、橙、红）高亮显示分数。 |
| **答案解析** | 提交后，应显示每道题的正确答案和解析。 |

## 4. 非功能性需求

| 需求类型 | 描述 |
| :--- | :--- |
| **可配置性** | 系统的核心参数（如端口）应易于配置，无需修改源代码。 |
| **可扩展性** | 添加新的题库应非常简单，只需将符合格式的 JSON 文件放入指定目录即可，系统应能自动识别。 |
| **易用性** | 用户界面应直观、易于操作。 |
| **开发友好性** | 提供自动化脚本（如 `generatelaunch.js`）来简化开发流程，例如自动同步 VS Code 的调试配置。 |

## 5. 题库数据格式

题库必须是有效的 JSON 格式，其根对象应包含 `title` (字符串) 和 `questions` (数组) 两个字段。`questions` 数组中的每个对象代表一道题目，具体结构见 `readme.md` 或示例题库文件。
